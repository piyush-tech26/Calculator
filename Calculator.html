<!DOCTYPE html>
<html>
<head>
    <title>Calculator</title>
    <style>
        .calculator 
        {
            padding: 24px;
            text-align: center;
        }
        #expression-list 
        {
            margin: 12px;
            min-height: 28px;
            font-size: 1.2rem;
        }
        #result 
        {
            margin: 16px;
            font-size: 1.2rem;
            font-weight: bold;
        }
        button 
        {
            margin: 8px;
            padding: 12px 18px;
            font-size: 1.2rem;
            width:20%
        }
        input 
        {
            margin: 8px;
            padding: 8px;
            font-size: 1.2rem;
            width:90%;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h1>Calculator</h1>
        <div id="expression-list"></div>
        <input type="text" id="userInput" placeholder="Type or use buttons"/><br>
        <button onclick="addInput('1')">1</button>
        <button onclick="addInput('2')">2</button>
        <button onclick="addInput('3')">3</button>
        <button onclick="addInput('+')">+</button><br>
        <button onclick="addInput('4')">4</button>
        <button onclick="addInput('5')">5</button>
        <button onclick="addInput('6')">6</button>
        <button onclick="addInput('-')">-</button><br>
        <button onclick="addInput('7')">7</button>
        <button onclick="addInput('8')">8</button>
        <button onclick="addInput('9')">9</button>
        <button onclick="addInput('*')">*</button><br>
        <button onclick="addInput('.')">.</button>
        <button onclick="addInput('0')">0</button>
        <button onclick="addInput('/')">/</button>
        <button onclick="addInput('=')">=</button><br>
        <button onclick="addInput('(')">(</button>
        <button onclick="addInput(')')">)</button>
        <div id="result"></div>
    </div>
    <script>
        let inputs = [];
        function update() 
        {
            document.getElementById("expression-list").textContent = "Expression: " + inputs.join("");
        }
        function addInput(val) 
        {
            if (val === "=") 
            {
                evaluate();
            } 
            else 
            {
                inputs.push(val);
                update();
                document.getElementById("result").textContent="";
            }
        }
        function evaluate() 
        {
            let expression = inputs.join("");
            if (/^[0-9+\-*/().\s]+$/.test(expression)) 
            {
                let output = eval(expression);
                document.getElementById("result").textContent="Result: " + output;
                inputs = [];
            }
            else 
            {
                document.getElementById("result").textContent="Invalid characters in expression.";
                inputs = [];
            }
            update();
        }
        document.getElementById("userInput").addEventListener("keyup", function(e) {
            if (e.key === "Enter") 
            {
                addInput("=");
            } 
            else 
            {
                let val = e.key;
                if (/^[0-9+\-*/().]$/.test(val)) 
                {
                    addInput(val);
                }
            }
        });
        update();
    </script>
</body>
</html>